(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4976:function(e,t,r){Promise.resolve().then(r.bind(r,6080))},6080:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(3827),a=r(4090),n=r(7907),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{color:n="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:h,...p}=r;return(0,a.createElement)("svg",{ref:s,...l,width:o,height:o,stroke:n,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(i(e)),u].join(" "),...p},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r},c=o("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function d(e){let{onSearch:t,onFocus:r,isExpanded:n}=e,[l,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(!1),u=(0,a.useRef)(null),h=async e=>{if(!e.trim())return;u.current&&u.current.abort();let r=new AbortController;u.current=r,d(!0);try{let s=await fetch("".concat("http://localhost:8000","/search/naver?query=").concat(encodeURIComponent(e)),{signal:r.signal});if(!s.ok)throw Error("Search failed");let a=await s.json();t(a)}catch(e){if("AbortError"===e.name)return;console.error(e),t([],"검색에 실패했습니다. 다시 시도해주세요.")}finally{d(!1)}};return(0,s.jsx)("div",{className:"search-container ".concat(n?"active":"idle"),children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h(l)},style:{position:"relative",maxWidth:"100%",width:"100%"},children:[(0,s.jsx)("input",{type:"text",className:"saas-input",placeholder:"가게 이름을 검색해 보세요 (예: 스타벅스 강남점)",value:l,onFocus:r,onChange:e=>i(e.target.value)}),(0,s.jsx)("button",{type:"submit",style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:o?"transparent":"#2563eb",color:o?"#999":"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:o?"default":"pointer"},disabled:o,children:o?(0,s.jsx)("div",{className:"loading-spinner",style:{width:"16px",height:"16px",borderTopColor:"#2563eb",border:"2px solid #eee"}}):(0,s.jsx)(c,{size:18})})]})})}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=o("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function h(e){let{candidates:t,selectedId:r,onSelect:a}=e;return 0===t.length?null:(0,s.jsx)("div",{className:"result-grid",children:t.map(e=>{let t=r===e.place_id;return(0,s.jsxs)("div",{className:"saas-card ".concat(t?"selected":""),onClick:()=>a(t?null:e),children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,s.jsx)("div",{className:"card-title",children:e.name}),t&&(0,s.jsx)(u,{size:20,color:"#2563eb"})]}),(0,s.jsx)("div",{className:"card-sub",children:e.road_address||e.address}),(0,s.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[(0,s.jsx)("span",{className:"card-badge",children:e.category||"일반 매장"}),e.tel&&(0,s.jsx)("span",{className:"card-badge",children:e.tel})]})]},e.place_id)})})}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=o("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);function m(e){let{storeName:t,onGenerate:r,isLoading:a}=e;return(0,s.jsx)("div",{className:"sticky-cta",children:(0,s.jsxs)("div",{className:"cta-inner",children:[(0,s.jsxs)("div",{className:"cta-summary",children:["선택된 매장: ",(0,s.jsx)("span",{style:{color:"#2563eb"},children:t})]}),(0,s.jsx)("button",{className:"cta-button",onClick:r,disabled:a,children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"loading-spinner",style:{width:"16px",height:"16px"}}),"분석 중..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{size:18,fill:"currentColor"}),"리포트 생성하기"]})})]})})}function x(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)("IDLE"),[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)(null),[u,p]=(0,a.useState)(null),x=async()=>{if(o){r("GENERATING");try{let t={store_name:o.name,place_id:o.place_id,address:o.address,road_address:o.road_address,tel:o.phone||o.tel,naver_link:o.link,mapx:o.mapx,mapy:o.mapy,category_path:o.category,source_type:"naver_seed"},r=await fetch("".concat("http://localhost:8000","/report"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Report generation failed");let s=await r.text();localStorage.setItem("reportHtml",s),e.push("/result")}catch(e){console.error(e),alert("리포트 생성에 실패했습니다. 다시 시도해주세요."),r("SELECTED")}}},f="IDLE"===t;return(0,s.jsxs)("div",{className:"container-saas",children:[(0,s.jsx)("header",{className:"header",children:(0,s.jsx)("div",{className:"logo",onClick:()=>window.location.reload(),children:"ReachCheck"})}),(0,s.jsxs)("main",{style:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:[(0,s.jsxs)("div",{className:"search-container ".concat(f?"idle":"active"),children:[(0,s.jsx)("div",{style:{textAlign:f?"center":"left",marginBottom:f?"20px":"0"},children:f&&(0,s.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"매장 분석, 검색 한 번으로 끝."})}),(0,s.jsx)(d,{onSearch:(e,t)=>{if(t){i([]),p(t),r("RESULTS");return}i(e),p(null),c(null),r((e.length,"RESULTS"))},onFocus:()=>{f&&r("SEARCHING")},isExpanded:!f})]}),!f&&(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)(h,{candidates:l,selectedId:(null==o?void 0:o.place_id)||null,onSelect:e=>{e?(c(e),r("SELECTED")):(c(null),r("RESULTS"))}}),0===l.length&&!u&&"SEARCHING"!==t&&(0,s.jsx)("div",{className:"state-message",children:"검색 결과가 없습니다."}),u&&(0,s.jsx)("div",{className:"state-message",style:{color:"#ef4444"},children:u})]})]}),"SELECTED"===t&&o&&(0,s.jsx)(m,{storeName:o.name,onGenerate:x,isLoading:!1}),"GENERATING"===t&&(0,s.jsxs)("div",{className:"loading-overlay",style:{flexDirection:"column",gap:"20px"},children:[(0,s.jsx)("div",{className:"loading-spinner",style:{width:"40px",height:"40px",borderTopColor:"#2563eb",border:"4px solid #eee"}}),(0,s.jsx)("div",{children:"리포트를 생성하고 있습니다..."}),(0,s.jsx)("div",{style:{fontSize:"0.9rem",color:"#666"},children:"약 30초 정도 소요됩니다."})]})]})}},7907:function(e,t,r){"use strict";var s=r(5313);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=4976)}),_N_E=e.O()}]);